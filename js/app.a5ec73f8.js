(function(e){function t(t){for(var l,r,o=t[0],i=t[1],s=t[2],b=0,d=[];b<o.length;b++)r=o[b],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,s||[]),c()}function c(){for(var e,t=0;t<a.length;t++){for(var c=a[t],l=!0,o=1;o<c.length;o++){var i=c[o];0!==n[i]&&(l=!1)}l&&(a.splice(t--,1),e=r(r.s=c[0]))}return e}var l={},n={app:0},a=[];function r(t){if(l[t])return l[t].exports;var c=l[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,r),c.l=!0,c.exports}r.m=e,r.c=l,r.d=function(e,t,c){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(r.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(c,l,function(t){return e[t]}.bind(null,l));return c},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/usd-vue3/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var u=i;a.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("56d7")},"13c0":function(e,t,c){"use strict";c("b1d1")},"15df":function(e,t,c){"use strict";c("335c")},3078:function(e,t,c){},"335c":function(e,t,c){},"56d7":function(e,t,c){"use strict";c.r(t);var l=c("7a23"),n=c("5502");const a={class:"nav"},r={class:"nav-item"},o={class:"nav-item"};var i={__name:"App",setup(e){const t=Object(n["b"])();return Object(l["t"])(async()=>{const{Valute:e}=await fetch("https://www.cbr-xml-daily.ru/daily_json.js").then(e=>e.json());t.commit("SET_CATALOG",Object.values(e))}),(e,t)=>{const c=Object(l["C"])("router-link"),n=Object(l["C"])("router-view");return Object(l["v"])(),Object(l["f"])(l["a"],null,[Object(l["g"])("ul",a,[Object(l["g"])("li",r,[Object(l["i"])(c,{class:"nav-link",to:"/catalog"},{default:Object(l["K"])(()=>[Object(l["h"])("Catalog")]),_:1})]),Object(l["g"])("li",o,[Object(l["i"])(c,{class:"nav-link",to:"/converter"},{default:Object(l["K"])(()=>[Object(l["h"])("Converter")]),_:1})])]),Object(l["i"])(n)],64)}}};c("b596");const s=i;var u=s,b=c("6605");const d=e=>(Object(l["y"])("data-v-ab43aa64"),e=e(),Object(l["w"])(),e),v={class:"list-group-item"},j={class:"d-flex align-items-center"},O=d(()=>Object(l["g"])("path",{"fill-rule":"evenodd",d:"M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"},null,-1)),h=[O],p=d(()=>Object(l["g"])("path",{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"},null,-1)),g=[p],f=d(()=>Object(l["g"])("path",{"fill-rule":"evenodd",d:"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"},null,-1)),m=[f],w=d(()=>Object(l["g"])("br",null,null,-1));var y={__name:"CurrencyItem",props:{item:{type:Object,default:null},switchCurrency:{type:Boolean,default:!1},isFavorited:{type:Boolean,default:!1}},setup(e){const t=e,c=Object(l["n"])("addItem"),n=Object(l["n"])("deleteItem"),a=e=>e.Nominal>e.Value?e.Nominal*e.Value:(e.Nominal/e.Value).toFixed(4),r=e=>(e.Value-e.Previous).toFixed(4);return(o,i)=>{const s=Object(l["C"])("router-link");return Object(l["v"])(),Object(l["f"])("li",v,[Object(l["g"])("div",j,[Object(l["g"])("div",null,Object(l["F"])(t.item.Name),1),e.isFavorited?(Object(l["v"])(),Object(l["f"])("svg",{key:0,onClick:i[0]||(i[0]=e=>Object(l["G"])(n)(t.item.index)),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart-fill svg",viewBox:"0 0 16 16"},h)):(Object(l["v"])(),Object(l["f"])("svg",{key:1,onClick:i[1]||(i[1]=e=>Object(l["G"])(c)({...t.item})),xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart svg",viewBox:"0 0 16 16"},g))]),Object(l["h"])(" "+Object(l["F"])(t.item.Nominal)+" "+Object(l["F"])(t.switchCurrency?"RUB":t.item.CharCode)+" - "+Object(l["F"])(t.switchCurrency?a(t.item):t.item.Value)+" "+Object(l["F"])(t.switchCurrency?t.item.CharCode:"RUB")+" ",1),Object(l["g"])("small",{style:Object(l["q"])({color:r(t.item)>0?"green":"red"})},[Object(l["h"])(" ( "),(Object(l["v"])(),Object(l["f"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-down",viewBox:"0 0 16 16",style:Object(l["q"])({transform:r(t.item)>0?"rotate(180deg)":null})},m,4)),Object(l["h"])(" "+Object(l["F"])(r(t.item))+") ",1)],4),w,Object(l["i"])(s,{to:"catalog/"+t.item.ID},{default:Object(l["K"])(()=>[Object(l["h"])(" Перейти ")]),_:1},8,["to"])])}}},C=(c("13c0"),c("6b0d")),x=c.n(C);const _=x()(y,[["__scopeId","data-v-ab43aa64"]]);var B=_;const F={class:"form-check form-switch"},k=["id"],D=["for"],A={key:0},L={class:"list-group"};var I={__name:"CurrencyList",props:{list:{type:Array,required:!0},isFavorited:{type:Boolean,default:!1}},setup(e){const t=e,c=Object(l["A"])(""),n=Object(l["b"])(()=>{const e=c.value.toLocaleLowerCase();return t.list.filter(({CharCode:t,Name:l})=>!c.value||t.toLowerCase().includes(e)||l.toLocaleLowerCase().includes(e))}),a=Object(l["A"])(!1);return(t,r)=>(Object(l["v"])(),Object(l["f"])(l["a"],null,[Object(l["g"])("div",F,[Object(l["L"])(Object(l["g"])("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>a.value=e),class:"form-check-input",type:"checkbox",role:"switch",id:"switch"+e.isFavorited||!1},null,8,k),[[l["H"],a.value]]),Object(l["g"])("label",{class:"form-check-label",for:"switch"+e.isFavorited||!1},"switch",8,D)]),e.isFavorited?Object(l["e"])("",!0):(Object(l["v"])(),Object(l["f"])("p",A,[Object(l["L"])(Object(l["g"])("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=e=>c.value=e),class:"form-control"},null,512),[[l["I"],c.value]])])),Object(l["g"])("ul",L,[(Object(l["v"])(!0),Object(l["f"])(l["a"],null,Object(l["B"])(n.value,(t,c)=>(Object(l["v"])(),Object(l["d"])(B,{key:c,item:t,"switch-currency":a.value,isFavorited:e.isFavorited},null,8,["item","switch-currency","isFavorited"]))),128))])],64))}};const P=I;var S=P,N=c("ade3");c("d9e2");class V{constructor(){Object(N["a"])(this,"open",(e,t,c)=>new Promise((l,n)=>{this.indexedDB=window.indexedDB.open(e,t),this.indexedDB.onupgradeneeded=()=>{this.db=this.indexedDB.result,c&&c(this.db)},this.indexedDB.onerror=e=>{n(e)},this.indexedDB.onsuccess=e=>{this.db=this.indexedDB.result,this.db.onversionchange=()=>{this.db.close(),alert("База данных устарела, пожалуста, перезагрузите страницу.")},l(e.target.result)}})),Object(N["a"])(this,"add",(e,t)=>new Promise((c,l)=>{var n;const a=null===(n=this.db)||void 0===n?void 0:n.transaction([t],"readwrite"),r=null===a||void 0===a?void 0:a.objectStore(t),o=null===r||void 0===r?void 0:r.add(e);o?(o.onsuccess=()=>{c()},o.onerror=e=>{l(e)}):l(this.indexedDB.error)})),Object(N["a"])(this,"getAll",e=>new Promise((t,c)=>{var l;const n=null===(l=this.db)||void 0===l?void 0:l.transaction([e],"readonly"),a=null===n||void 0===n?void 0:n.objectStore(e),r=null===a||void 0===a?void 0:a.getAll();r?(r.onsuccess=e=>{t(e.target.result)},r.onerror=e=>{c(e)}):c(this.indexedDB.error)})),Object(N["a"])(this,"deleteDB",e=>new Promise((t,c)=>{const l=this.indexedDB.deleteDatabase(e);l.onsuccess=()=>{t()},l.onerror=()=>{c(new Error("Ошибка удаления базы"))}})),Object(N["a"])(this,"deleteList",e=>this.db.deleteObjectStore(e)),Object(N["a"])(this,"clearList",e=>new Promise((t,c)=>{var l;const n=null===(l=this.db)||void 0===l?void 0:l.transaction([e],"readwrite"),a=n.objectStore(e),r=a.clear();r.onerror=e=>c(e),r.onsuccess=()=>t()})),Object(N["a"])(this,"delete",(e,t)=>new Promise((c,l)=>{var n;const a=null===(n=this.db)||void 0===n?void 0:n.transaction([e],"readwrite"),r=a.objectStore(e),o=r.delete(t);o.onerror=e=>l(e),o.onsuccess=()=>c()})),this.indexedDB=window.indexedDB,this.db=null}}var G=new V;const M=Object(l["g"])("h1",null,"Catalog",-1),T={key:0},U="favorites";var z={__name:"Catalog",setup(e){const t=Object(n["b"])(),c=G,a=Object(l["A"])([]),r=Object(l["b"])((function(){return t.state.catalog.filter(({ID:e})=>!a.value.some(t=>t.ID==e))})),o=()=>{c.getAll(U).then(e=>a.value=e)},i=async e=>{await c.add(e,U),o()},s=async e=>{await c.delete(U,e),o()};return Object(l["x"])("addItem",i),Object(l["x"])("deleteItem",s),Object(l["t"])(async()=>{await c.open("myDB",1,e=>{e.objectStoreNames.contains(U)||e.createObjectStore(U,{keyPath:"index",autoIncrement:!0})}),o()}),(e,t)=>(Object(l["v"])(),Object(l["f"])(l["a"],null,[M,a.value.length?(Object(l["v"])(),Object(l["f"])("p",T,[Object(l["i"])(S,{list:a.value,isFavorited:""},null,8,["list"])])):Object(l["e"])("",!0),Object(l["i"])(S,{list:r.value},null,8,["list"])],64))}};const H=z;var E=H;const R={key:0},K=Object(l["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-left",viewBox:"0 0 16 16"},[Object(l["g"])("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})],-1),q={key:1};var J={__name:"_id",setup(e){const t=Object(n["b"])(),c=Object(b["c"])(),a=Object(l["b"])(()=>t.getters["GET_BY_ID"](c.params.id));return(e,t)=>{const c=Object(l["C"])("router-link");return a.value?(Object(l["v"])(),Object(l["f"])("div",R,[Object(l["i"])(c,{to:"/catalog"},{default:Object(l["K"])(()=>[K,Object(l["h"])(" Назад ")]),_:1}),Object(l["g"])("h1",null,Object(l["F"])(a.value.Name),1),Object(l["g"])("h2",null,Object(l["F"])(a.value.Nominal)+" "+Object(l["F"])(a.value.CharCode)+" - "+Object(l["F"])(a.value.Value)+" RUB",1),Object(l["g"])("pre",null,Object(l["F"])(JSON.stringify(a.value,null,3)),1)])):(Object(l["v"])(),Object(l["f"])("div",q,"404"))}}};const Y=J;var Q=Y;const W=(e,t="ru")=>new Intl.NumberFormat(t,{style:"currency",currency:e}).formatToParts(1).find(e=>"currency"===e.type).value,X=new Intl.NumberFormat,Z=Object(l["g"])("h1",null,"Converter",-1),$={class:"converter"},ee={class:"input-group"},te={class:"input-group-text"},ce={class:"converter__button"},le=Object(l["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-left-right",viewBox:"0 0 16 16"},[Object(l["g"])("path",{"fill-rule":"evenodd",d:"M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"})],-1),ne=[le],ae={class:"input-group"},re=["value"],oe=["onClick"];var ie={__name:"Converter",setup(e){const t=Object(l["A"])(!1),c=Object(l["A"])(null),a=Object(l["A"])(!1),r=Object(l["A"])(""),o=Object(n["b"])(),i=Object(l["b"])((function(){return o.state.catalog})),s=()=>{if(!c.value||!r.value)return null;const{Value:e,Nominal:t}=c.value,l=e/t;return(a.value?l*r.value:r.value/l).toFixed(4)},u=e=>{c.value=e,t.value=!1};return(e,n)=>(Object(l["v"])(),Object(l["f"])(l["a"],null,[Z,Object(l["g"])("div",$,[Object(l["g"])("div",null,[Object(l["g"])("div",ee,[Object(l["g"])("span",te,Object(l["F"])(Object(l["G"])(W)(a.value&&c.value?c.value.CharCode:"RUB")),1),Object(l["L"])(Object(l["g"])("input",{type:"number","onUpdate:modelValue":n[0]||(n[0]=e=>r.value=e),class:"form-control"},null,512),[[l["I"],r.value]])])]),Object(l["g"])("div",ce,[Object(l["g"])("button",{onClick:n[1]||(n[1]=e=>c.value&&(a.value=!a.value)),type:"button",class:"btn btn-secondary"},ne)]),Object(l["g"])("div",null,[Object(l["g"])("div",ae,[Object(l["g"])("input",{value:Object(l["G"])(X).format(s()),type:"text",class:"form-control",disabled:""},null,8,re),Object(l["g"])("button",{onClick:n[2]||(n[2]=e=>t.value=!t.value),class:Object(l["p"])(["btn btn-outline-secondary dropdown-toggle",{show:t.value}])},Object(l["F"])(c.value?Object(l["G"])(W)(a.value?"RUB":c.value.CharCode):"?"),3),Object(l["g"])("ul",{class:Object(l["p"])(["dropdown-menu dropdown-menu-end",{show:t.value,pos:t.value}])},[(Object(l["v"])(!0),Object(l["f"])(l["a"],null,Object(l["B"])(i.value,(e,t)=>(Object(l["v"])(),Object(l["f"])("li",{onClick:t=>u(e),key:t,class:"dropdown-item"},Object(l["F"])(e.CharCode),9,oe))),128))],2)])])])],64))}};c("15df");const se=ie;var ue=se;const be=[{path:"/catalog",name:"Catalog",component:E},{path:"/catalog/:id",name:"CatalogDetail",component:Q},{path:"/converter",name:"Converter",component:ue}],de=Object(b["a"])({history:Object(b["b"])("/usd-vue3/"),routes:be});var ve=de;const je=Object(n["a"])({state:{catalog:[]},mutations:{SET_CATALOG(e,t){e.catalog=t}},getters:{GET_BY_ID(e){return t=>{var c;return null===(c=e.catalog)||void 0===c?void 0:c.find(({ID:e})=>e===t)}}}});var Oe=je;Object(l["c"])(u).use(ve).use(Oe).mount("#app")},b1d1:function(e,t,c){},b596:function(e,t,c){"use strict";c("3078")}});
//# sourceMappingURL=app.a5ec73f8.js.map